(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["media"],{"0b42":function(e,t,r){var a=r("861d"),n=r("e8b5"),o=r("b622"),i=o("species");e.exports=function(e){var t;return n(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!n(t.prototype)?a(t)&&(t=t[i],null===t&&(t=void 0)):t=void 0),void 0===t?Array:t}},"159b":function(e,t,r){var a=r("da84"),n=r("fdbc"),o=r("17c2"),i=r("9112");for(var s in n){var c=a[s],u=c&&c.prototype;if(u&&u.forEach!==o)try{i(u,"forEach",o)}catch(l){u.forEach=o}}},"17c2":function(e,t,r){"use strict";var a=r("b727").forEach,n=r("a640"),o=n("forEach");e.exports=o?[].forEach:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}},"21a9":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.showCameraIsStartingMessage?r("div",{staticStyle:{height:"200px","background-color":"red"}},[r("b-overlay",{attrs:{show:!0,"no-wrap":""},scopedSlots:e._u([{key:"overlay",fn:function(){return[r("div",{staticClass:"text-center"},[r("b-icon",{attrs:{icon:"camera-video",scale:"2",animation:"fade"}})],1),r("div",[e._v(" Camera is starting ... ")])]},proxy:!0}],null,!1,2853725799)})],1):e._e(),r("b-collapse",{model:{value:e.showCollapseCamera,callback:function(t){e.showCollapseCamera=t},expression:"showCollapseCamera"}},[r("video",{ref:"video",staticClass:"w-100",staticStyle:{"-webkit-transform":"scaleX(-1)"},attrs:{autoplay:"",playsinline:""},domProps:{srcObject:e.cameraStream}}),r("div",{staticClass:"m-3"},[r("b-button",{attrs:{variant:"primary",block:"",disabled:e.showCollapseCameraOverlay},on:{click:e.onClickPredictButton}},[r("b-icon",{attrs:{icon:"cloud-upload"}}),e._v(" Predict ")],1)],1),r("b-alert",{staticClass:"m-3",attrs:{show:""}},[r("b-icon",{attrs:{icon:"hand-index"}}),e._v(" Capture a flower on the camera. Then tap the Predict button. The photos will be sent to the server, but won't be saved. ")],1),r("b-overlay",{attrs:{show:e.showCollapseCameraOverlay,"no-wrap":""},scopedSlots:e._u([{key:"overlay",fn:function(){return[r("div",{staticClass:"text-center"},[r("b-icon",{attrs:{icon:"cloud-upload",scale:"2",animation:"fade"}})],1),r("div",[e._v(" Sending and predicting ... ")])]},proxy:!0}])})],1),r("b-collapse",{model:{value:e.showCollapsePredictionResult,callback:function(t){e.showCollapsePredictionResult=t},expression:"showCollapsePredictionResult"}},[r("b-card",{staticClass:"m-3",attrs:{"img-src":e.imgSrcBase64,"img-top":"",title:"Prediction result"}},[r("b-list-group",{attrs:{flush:""}},e._l(e.predictionResults,(function(t){return r("b-list-group-item",{key:t.id},[e._v(" "+e._s(t.name)+": "+e._s(t.confidence)),r("br"),r("b-link",{attrs:{href:"https://www.google.com/search?q="+t.name+"+flower&tbm=isch",target:"_blank"}},[r("b-icon",{attrs:{icon:"search"}}),e._v(" (Google) ")],1)],1)})),1),r("div",[r("b-button",{staticClass:"mt-3",attrs:{variant:"primary",block:""},on:{click:e.onClickBackButton}},[r("b-icon",{attrs:{icon:"camera-video"}}),e._v(" Back to camera ")],1)],1)],1)],1)],1)},n=[],o=r("1da1"),i=(r("96cf"),r("159b"),function(e){var t=e.getTracks();t.forEach((function(e){e.stop()}))}),s=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t=navigator.mediaDevices.getSupportedConstraints(),t.aspectRatio&&t.width&&t.height&&t.facingMode){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment"}});case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e["catch"](0),console.info({err:e.t0}),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),c=function(e){var t=document.createElement("canvas");if(e){var r=.5*e.offsetWidth,a=.5*e.offsetHeight;t.setAttribute("width",r),t.setAttribute("height",a),t.getContext("2d").drawImage(e,0,0,r,a);var n=t.toDataURL("image/jpg");return n}},u={name:"MediaView",components:{},data:function(){return{showCameraIsStartingMessage:!0,cameraStream:null,showCollapseCameraOverlay:!1,showCollapseCamera:!1,showCollapsePredictionResult:!1,imgSrcBase64:"",predictionResults:[]}},computed:{},watch:{},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s();case 2:if(r=t.sent,r){t.next=5;break}return t.abrupt("return");case 5:e.cameraStream=r,setTimeout((function(){e.showCameraIsStartingMessage=!1,e.showCollapseCamera=!0}),5e3);case 7:case"end":return t.stop()}}),t)})))()},methods:{onClickPredictButton:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.showCollapseCameraOverlay=!0,this.imgSrcBase64=c(this.$refs.video),this.imgSrcBase64){e.next=5;break}return this.showCollapseCameraOverlay=!1,e.abrupt("return");case 5:t={result:[{name:"Windflower",confidence:.6562319},{name:"Pansy",confidence:.16973963},{name:"Snowdrop",confidence:.119459644}],otherParameter:"foo"},this.predictionResults=t.result,setTimeout((function(){r.showCollapseCameraOverlay=!1,i(r.cameraStream),r.cameraStream=null,r.showCollapseCamera=!1,setTimeout((function(){r.showCollapsePredictionResult=!0}),500)}),5e3);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onClickBackButton:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.showCollapsePredictionResult=!1,this.imgSrcBase64="",this.predictionResults=[],e.next=5,s();case 5:this.cameraStream=e.sent,setTimeout((function(){t.showCollapseCamera=!0}),3e3);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},l=u,p=r("2877"),f=Object(p["a"])(l,a,n,!1,null,null,null);t["default"]=f.exports},"65f0":function(e,t,r){var a=r("0b42");e.exports=function(e,t){return new(a(e))(0===t?0:t)}},a640:function(e,t,r){"use strict";var a=r("d039");e.exports=function(e,t){var r=[][e];return!!r&&a((function(){r.call(null,t||function(){throw 1},1)}))}},b727:function(e,t,r){var a=r("0366"),n=r("44ad"),o=r("7b0b"),i=r("50c4"),s=r("65f0"),c=[].push,u=function(e){var t=1==e,r=2==e,u=3==e,l=4==e,p=6==e,f=7==e,d=5==e||p;return function(h,m,v,w){for(var b,C,g=o(h),y=n(g),k=a(m,v,3),x=i(y.length),R=0,S=w||s,_=t?S(h,x):r||f?S(h,0):void 0;x>R;R++)if((d||R in y)&&(b=y[R],C=k(b,R,g),e))if(t)_[R]=C;else if(C)switch(e){case 3:return!0;case 5:return b;case 6:return R;case 2:c.call(_,b)}else switch(e){case 4:return!1;case 7:c.call(_,b)}return p?-1:u||l?l:_}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},e8b5:function(e,t,r){var a=r("c6b6");e.exports=Array.isArray||function(e){return"Array"==a(e)}}}]);
//# sourceMappingURL=media.ae1c9245.js.map